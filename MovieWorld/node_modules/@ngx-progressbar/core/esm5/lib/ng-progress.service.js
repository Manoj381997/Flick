/**
 * @fileoverview added by tsickle
 * @suppress {checkTypes} checked by tsc
 */
import * as tslib_1 from "tslib";
import { Injectable, Inject, Optional } from '@angular/core';
import { NgProgressRef } from './ng-progress-ref';
import { EMPTY } from 'rxjs';
import { CONFIG } from './ng-progress.token';
var ɵ0 = function (n) {
    if (n >= 0 && n < 20)
        return 10;
    if (n >= 20 && n < 50)
        return 4;
    if (n >= 50 && n < 80)
        return 2;
    if (n >= 80 && n < 99)
        return 0.5;
    return 0;
};
var /** @type {?} */ defaultConfig = {
    meteor: true,
    spinner: true,
    thick: false,
    ease: 'linear',
    spinnerPosition: 'right',
    direction: 'ltr+',
    color: '#1B95E0',
    max: 100,
    min: 8,
    speed: 200,
    trickleSpeed: 300,
    debounceTime: 0,
    trickleFunc: ɵ0
};
var NgProgress = /** @class */ (function () {
    function NgProgress(config) {
        /**
         * Stores NgProgressRef instances
         */
        this._instances = {};
        this.config = tslib_1.__assign({}, defaultConfig, config);
    }
    /**
     * Returns NgProgressRef by ID
     */
    /**
     * Returns NgProgressRef by ID
     * @param {?=} id
     * @param {?=} config
     * @return {?}
     */
    NgProgress.prototype.ref = /**
     * Returns NgProgressRef by ID
     * @param {?=} id
     * @param {?=} config
     * @return {?}
     */
    function (id, config) {
        if (id === void 0) { id = 'root'; }
        if (this._instances[id] instanceof NgProgressRef) {
            return this._instances[id];
        }
        else {
            config = tslib_1.__assign({}, this.config, config);
            return this._instances[id] = new NgProgressRef(config);
        }
    };
    /**
     * @param {?} config
     * @param {?=} id
     * @return {?}
     */
    NgProgress.prototype.setConfig = /**
     * @param {?} config
     * @param {?=} id
     * @return {?}
     */
    function (config, id) {
        if (id === void 0) { id = 'root'; }
        if (this._instances[id] instanceof NgProgressRef) {
            this._instances[id].setConfig(config);
        }
    };
    /**
     * @param {?=} id
     * @return {?}
     */
    NgProgress.prototype.start = /**
     * @param {?=} id
     * @return {?}
     */
    function (id) {
        if (id === void 0) { id = 'root'; }
        if (this._instances[id] instanceof NgProgressRef) {
            this._instances[id].start();
        }
    };
    /**
     * @param {?} n
     * @param {?=} id
     * @return {?}
     */
    NgProgress.prototype.set = /**
     * @param {?} n
     * @param {?=} id
     * @return {?}
     */
    function (n, id) {
        if (id === void 0) { id = 'root'; }
        if (this._instances[id] instanceof NgProgressRef) {
            this._instances[id].set(n);
        }
    };
    /**
     * @param {?=} n
     * @param {?=} id
     * @return {?}
     */
    NgProgress.prototype.inc = /**
     * @param {?=} n
     * @param {?=} id
     * @return {?}
     */
    function (n, id) {
        if (id === void 0) { id = 'root'; }
        if (this._instances[id] instanceof NgProgressRef) {
            this._instances[id].inc(n);
        }
    };
    /**
     * @param {?=} id
     * @return {?}
     */
    NgProgress.prototype.complete = /**
     * @param {?=} id
     * @return {?}
     */
    function (id) {
        if (id === void 0) { id = 'root'; }
        if (this._instances[id] instanceof NgProgressRef) {
            this._instances[id].complete();
        }
    };
    /**
     * @param {?=} id
     * @return {?}
     */
    NgProgress.prototype.isStarted = /**
     * @param {?=} id
     * @return {?}
     */
    function (id) {
        if (id === void 0) { id = 'root'; }
        return (this._instances[id] instanceof NgProgressRef) ? this._instances[id].isStarted : false;
    };
    /**
     * @param {?=} id
     * @return {?}
     */
    NgProgress.prototype.started = /**
     * @param {?=} id
     * @return {?}
     */
    function (id) {
        if (id === void 0) { id = 'root'; }
        return (this._instances[id] instanceof NgProgressRef) ? this._instances[id].started : EMPTY;
    };
    /**
     * @param {?=} id
     * @return {?}
     */
    NgProgress.prototype.completed = /**
     * @param {?=} id
     * @return {?}
     */
    function (id) {
        if (id === void 0) { id = 'root'; }
        return (this._instances[id] instanceof NgProgressRef) ? this._instances[id].completed : EMPTY;
    };
    /**
     * @param {?=} id
     * @return {?}
     */
    NgProgress.prototype.destroy = /**
     * @param {?=} id
     * @return {?}
     */
    function (id) {
        if (id === void 0) { id = 'root'; }
        if (this._instances[id] instanceof NgProgressRef) {
            this._instances[id].destroy();
            this._instances[id] = null;
        }
    };
    /**
     * @return {?}
     */
    NgProgress.prototype.destroyAll = /**
     * @return {?}
     */
    function () {
        var _this = this;
        Object.keys(this._instances).map(function (key) {
            _this._instances[key].destroy();
            _this._instances[key] = null;
        });
    };
    NgProgress.decorators = [
        { type: Injectable },
    ];
    /** @nocollapse */
    NgProgress.ctorParameters = function () { return [
        { type: undefined, decorators: [{ type: Optional }, { type: Inject, args: [CONFIG,] },] },
    ]; };
    return NgProgress;
}());
export { NgProgress };
function NgProgress_tsickle_Closure_declarations() {
    /** @type {!Array<{type: !Function, args: (undefined|!Array<?>)}>} */
    NgProgress.decorators;
    /**
     * @nocollapse
     * @type {function(): !Array<(null|{type: ?, decorators: (undefined|!Array<{type: !Function, args: (undefined|!Array<?>)}>)})>}
     */
    NgProgress.ctorParameters;
    /**
     * Stores NgProgressRef instances
     * @type {?}
     */
    NgProgress.prototype._instances;
    /**
     * Global config
     * @type {?}
     */
    NgProgress.prototype.config;
}
export { ɵ0 };

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmctcHJvZ3Jlc3Muc2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiJuZzovL0BuZ3gtcHJvZ3Jlc3NiYXIvY29yZS8iLCJzb3VyY2VzIjpbImxpYi9uZy1wcm9ncmVzcy5zZXJ2aWNlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsT0FBTyxFQUFFLFVBQVUsRUFBRSxNQUFNLEVBQUUsUUFBUSxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBQzdELE9BQU8sRUFBRSxhQUFhLEVBQUUsTUFBTSxtQkFBbUIsQ0FBQztBQUVsRCxPQUFPLEVBQUUsS0FBSyxFQUFFLE1BQU0sTUFBTSxDQUFDO0FBQzdCLE9BQU8sRUFBRSxNQUFNLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztTQWU5QixVQUFDLENBQVM7SUFDckIsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQUMsTUFBTSxDQUFDLEVBQUUsQ0FBQztJQUNoQyxFQUFFLENBQUMsQ0FBQyxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUM7UUFBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0lBQ2hDLEVBQUUsQ0FBQyxDQUFDLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQztRQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFDaEMsRUFBRSxDQUFDLENBQUMsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxDQUFDO1FBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQztJQUNsQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0NBQ1Y7QUFuQkgscUJBQU0sYUFBYSxHQUFxQjtJQUN0QyxNQUFNLEVBQUUsSUFBSTtJQUNaLE9BQU8sRUFBRSxJQUFJO0lBQ2IsS0FBSyxFQUFFLEtBQUs7SUFDWixJQUFJLEVBQUUsUUFBUTtJQUNkLGVBQWUsRUFBRSxPQUFPO0lBQ3hCLFNBQVMsRUFBRSxNQUFNO0lBQ2pCLEtBQUssRUFBRSxTQUFTO0lBQ2hCLEdBQUcsRUFBRSxHQUFHO0lBQ1IsR0FBRyxFQUFFLENBQUM7SUFDTixLQUFLLEVBQUUsR0FBRztJQUNWLFlBQVksRUFBRSxHQUFHO0lBQ2pCLFlBQVksRUFBRSxDQUFDO0lBQ2YsV0FBVyxJQU1WO0NBQ0YsQ0FBQzs7SUFXQSxvQkFBd0M7Ozs7MEJBTFYsRUFBRTtRQU05QixJQUFJLENBQUMsTUFBTSx3QkFBTyxhQUFhLEVBQUssTUFBTSxDQUFDLENBQUM7S0FDN0M7SUFFRDs7T0FFRzs7Ozs7OztJQUNILHdCQUFHOzs7Ozs7SUFBSCxVQUFJLEVBQVcsRUFBRSxNQUF5QjtRQUF0QyxtQkFBQSxFQUFBLFdBQVc7UUFDYixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxZQUFZLGFBQWEsQ0FBQyxDQUFDLENBQUM7WUFDakQsTUFBTSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUM7U0FDNUI7UUFBQyxJQUFJLENBQUMsQ0FBQztZQUNOLE1BQU0sd0JBQU8sSUFBSSxDQUFDLE1BQU0sRUFBSyxNQUFNLENBQUMsQ0FBQztZQUNyQyxNQUFNLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsR0FBRyxJQUFJLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQztTQUN4RDtLQUNGOzs7Ozs7SUFFRCw4QkFBUzs7Ozs7SUFBVCxVQUFVLE1BQXdCLEVBQUUsRUFBVztRQUFYLG1CQUFBLEVBQUEsV0FBVztRQUM3QyxFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxZQUFZLGFBQWEsQ0FBQyxDQUFDLENBQUM7WUFDakQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDdkM7S0FDRjs7Ozs7SUFFRCwwQkFBSzs7OztJQUFMLFVBQU0sRUFBVztRQUFYLG1CQUFBLEVBQUEsV0FBVztRQUNmLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLFlBQVksYUFBYSxDQUFDLENBQUMsQ0FBQztZQUNqRCxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEtBQUssRUFBRSxDQUFDO1NBQzdCO0tBQ0Y7Ozs7OztJQUVELHdCQUFHOzs7OztJQUFILFVBQUksQ0FBUyxFQUFFLEVBQVc7UUFBWCxtQkFBQSxFQUFBLFdBQVc7UUFDeEIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsWUFBWSxhQUFhLENBQUMsQ0FBQyxDQUFDO1lBQ2pELElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQzVCO0tBQ0Y7Ozs7OztJQUVELHdCQUFHOzs7OztJQUFILFVBQUksQ0FBVSxFQUFFLEVBQVc7UUFBWCxtQkFBQSxFQUFBLFdBQVc7UUFDekIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsWUFBWSxhQUFhLENBQUMsQ0FBQyxDQUFDO1lBQ2pELElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1NBQzVCO0tBQ0Y7Ozs7O0lBRUQsNkJBQVE7Ozs7SUFBUixVQUFTLEVBQVc7UUFBWCxtQkFBQSxFQUFBLFdBQVc7UUFDbEIsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsWUFBWSxhQUFhLENBQUMsQ0FBQyxDQUFDO1lBQ2pELElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUMsUUFBUSxFQUFFLENBQUM7U0FDaEM7S0FDRjs7Ozs7SUFFRCw4QkFBUzs7OztJQUFULFVBQVUsRUFBVztRQUFYLG1CQUFBLEVBQUEsV0FBVztRQUNuQixNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxZQUFZLGFBQWEsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDO0tBQy9GOzs7OztJQUVELDRCQUFPOzs7O0lBQVAsVUFBUSxFQUFXO1FBQVgsbUJBQUEsRUFBQSxXQUFXO1FBQ2pCLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLFlBQVksYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsRUFBRSxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUM7S0FDN0Y7Ozs7O0lBRUQsOEJBQVM7Ozs7SUFBVCxVQUFVLEVBQVc7UUFBWCxtQkFBQSxFQUFBLFdBQVc7UUFDbkIsTUFBTSxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsWUFBWSxhQUFhLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQztLQUMvRjs7Ozs7SUFFRCw0QkFBTzs7OztJQUFQLFVBQVEsRUFBVztRQUFYLG1CQUFBLEVBQUEsV0FBVztRQUNqQixFQUFFLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxZQUFZLGFBQWEsQ0FBQyxDQUFDLENBQUM7WUFDakQsSUFBSSxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxPQUFPLEVBQUUsQ0FBQztZQUM5QixJQUFJLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxHQUFHLElBQUksQ0FBQztTQUM1QjtLQUNGOzs7O0lBRUQsK0JBQVU7OztJQUFWO1FBQUEsaUJBS0M7UUFKQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQyxHQUFHLENBQUMsVUFBQyxHQUFHO1lBQ25DLEtBQUksQ0FBQyxVQUFVLENBQUMsR0FBRyxDQUFDLENBQUMsT0FBTyxFQUFFLENBQUM7WUFDL0IsS0FBSSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsR0FBRyxJQUFJLENBQUM7U0FDN0IsQ0FBQyxDQUFDO0tBQ0o7O2dCQS9FRixVQUFVOzs7O2dEQVNJLFFBQVEsWUFBSSxNQUFNLFNBQUMsTUFBTTs7cUJBckN4Qzs7U0E2QmEsVUFBVSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEluamVjdGFibGUsIEluamVjdCwgT3B0aW9uYWwgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuaW1wb3J0IHsgTmdQcm9ncmVzc1JlZiB9IGZyb20gJy4vbmctcHJvZ3Jlc3MtcmVmJztcclxuaW1wb3J0IHsgTmdQcm9ncmVzc0NvbmZpZyB9IGZyb20gJy4vbmctcHJvZ3Jlc3MuaW50ZXJmYWNlJztcclxuaW1wb3J0IHsgRU1QVFkgfSBmcm9tICdyeGpzJztcclxuaW1wb3J0IHsgQ09ORklHIH0gZnJvbSAnLi9uZy1wcm9ncmVzcy50b2tlbic7XHJcblxyXG5jb25zdCBkZWZhdWx0Q29uZmlnOiBOZ1Byb2dyZXNzQ29uZmlnID0ge1xyXG4gIG1ldGVvcjogdHJ1ZSxcclxuICBzcGlubmVyOiB0cnVlLFxyXG4gIHRoaWNrOiBmYWxzZSxcclxuICBlYXNlOiAnbGluZWFyJyxcclxuICBzcGlubmVyUG9zaXRpb246ICdyaWdodCcsXHJcbiAgZGlyZWN0aW9uOiAnbHRyKycsXHJcbiAgY29sb3I6ICcjMUI5NUUwJyxcclxuICBtYXg6IDEwMCxcclxuICBtaW46IDgsXHJcbiAgc3BlZWQ6IDIwMCxcclxuICB0cmlja2xlU3BlZWQ6IDMwMCxcclxuICBkZWJvdW5jZVRpbWU6IDAsXHJcbiAgdHJpY2tsZUZ1bmM6IChuOiBudW1iZXIpOiBudW1iZXIgPT4ge1xyXG4gICAgaWYgKG4gPj0gMCAmJiBuIDwgMjApIHJldHVybiAxMDtcclxuICAgIGlmIChuID49IDIwICYmIG4gPCA1MCkgcmV0dXJuIDQ7XHJcbiAgICBpZiAobiA+PSA1MCAmJiBuIDwgODApIHJldHVybiAyO1xyXG4gICAgaWYgKG4gPj0gODAgJiYgbiA8IDk5KSByZXR1cm4gMC41O1xyXG4gICAgcmV0dXJuIDA7XHJcbiAgfVxyXG59O1xyXG5cclxuQEluamVjdGFibGUoKVxyXG5leHBvcnQgY2xhc3MgTmdQcm9ncmVzcyB7XHJcblxyXG4gIC8qKiBTdG9yZXMgTmdQcm9ncmVzc1JlZiBpbnN0YW5jZXMgKi9cclxuICBwcml2YXRlIHJlYWRvbmx5IF9pbnN0YW5jZXMgPSB7fTtcclxuXHJcbiAgLyoqIEdsb2JhbCBjb25maWcgKi9cclxuICBjb25maWc6IE5nUHJvZ3Jlc3NDb25maWc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKEBPcHRpb25hbCgpIEBJbmplY3QoQ09ORklHKSBjb25maWc6IE5nUHJvZ3Jlc3NDb25maWcpIHtcclxuICAgIHRoaXMuY29uZmlnID0gey4uLmRlZmF1bHRDb25maWcsIC4uLmNvbmZpZ307XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBSZXR1cm5zIE5nUHJvZ3Jlc3NSZWYgYnkgSURcclxuICAgKi9cclxuICByZWYoaWQgPSAncm9vdCcsIGNvbmZpZz86IE5nUHJvZ3Jlc3NDb25maWcpIHtcclxuICAgIGlmICh0aGlzLl9pbnN0YW5jZXNbaWRdIGluc3RhbmNlb2YgTmdQcm9ncmVzc1JlZikge1xyXG4gICAgICByZXR1cm4gdGhpcy5faW5zdGFuY2VzW2lkXTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbmZpZyA9IHsuLi50aGlzLmNvbmZpZywgLi4uY29uZmlnfTtcclxuICAgICAgcmV0dXJuIHRoaXMuX2luc3RhbmNlc1tpZF0gPSBuZXcgTmdQcm9ncmVzc1JlZihjb25maWcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0Q29uZmlnKGNvbmZpZzogTmdQcm9ncmVzc0NvbmZpZywgaWQgPSAncm9vdCcpIHtcclxuICAgIGlmICh0aGlzLl9pbnN0YW5jZXNbaWRdIGluc3RhbmNlb2YgTmdQcm9ncmVzc1JlZikge1xyXG4gICAgICB0aGlzLl9pbnN0YW5jZXNbaWRdLnNldENvbmZpZyhjb25maWcpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc3RhcnQoaWQgPSAncm9vdCcpIHtcclxuICAgIGlmICh0aGlzLl9pbnN0YW5jZXNbaWRdIGluc3RhbmNlb2YgTmdQcm9ncmVzc1JlZikge1xyXG4gICAgICB0aGlzLl9pbnN0YW5jZXNbaWRdLnN0YXJ0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXQobjogbnVtYmVyLCBpZCA9ICdyb290Jykge1xyXG4gICAgaWYgKHRoaXMuX2luc3RhbmNlc1tpZF0gaW5zdGFuY2VvZiBOZ1Byb2dyZXNzUmVmKSB7XHJcbiAgICAgIHRoaXMuX2luc3RhbmNlc1tpZF0uc2V0KG4pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaW5jKG4/OiBudW1iZXIsIGlkID0gJ3Jvb3QnKSB7XHJcbiAgICBpZiAodGhpcy5faW5zdGFuY2VzW2lkXSBpbnN0YW5jZW9mIE5nUHJvZ3Jlc3NSZWYpIHtcclxuICAgICAgdGhpcy5faW5zdGFuY2VzW2lkXS5pbmMobik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBjb21wbGV0ZShpZCA9ICdyb290Jykge1xyXG4gICAgaWYgKHRoaXMuX2luc3RhbmNlc1tpZF0gaW5zdGFuY2VvZiBOZ1Byb2dyZXNzUmVmKSB7XHJcbiAgICAgIHRoaXMuX2luc3RhbmNlc1tpZF0uY29tcGxldGUoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGlzU3RhcnRlZChpZCA9ICdyb290Jykge1xyXG4gICAgcmV0dXJuICh0aGlzLl9pbnN0YW5jZXNbaWRdIGluc3RhbmNlb2YgTmdQcm9ncmVzc1JlZikgPyB0aGlzLl9pbnN0YW5jZXNbaWRdLmlzU3RhcnRlZCA6IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgc3RhcnRlZChpZCA9ICdyb290Jykge1xyXG4gICAgcmV0dXJuICh0aGlzLl9pbnN0YW5jZXNbaWRdIGluc3RhbmNlb2YgTmdQcm9ncmVzc1JlZikgPyB0aGlzLl9pbnN0YW5jZXNbaWRdLnN0YXJ0ZWQgOiBFTVBUWTtcclxuICB9XHJcblxyXG4gIGNvbXBsZXRlZChpZCA9ICdyb290Jykge1xyXG4gICAgcmV0dXJuICh0aGlzLl9pbnN0YW5jZXNbaWRdIGluc3RhbmNlb2YgTmdQcm9ncmVzc1JlZikgPyB0aGlzLl9pbnN0YW5jZXNbaWRdLmNvbXBsZXRlZCA6IEVNUFRZO1xyXG4gIH1cclxuXHJcbiAgZGVzdHJveShpZCA9ICdyb290Jykge1xyXG4gICAgaWYgKHRoaXMuX2luc3RhbmNlc1tpZF0gaW5zdGFuY2VvZiBOZ1Byb2dyZXNzUmVmKSB7XHJcbiAgICAgIHRoaXMuX2luc3RhbmNlc1tpZF0uZGVzdHJveSgpO1xyXG4gICAgICB0aGlzLl9pbnN0YW5jZXNbaWRdID0gbnVsbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGRlc3Ryb3lBbGwoKSB7XHJcbiAgICBPYmplY3Qua2V5cyh0aGlzLl9pbnN0YW5jZXMpLm1hcCgoa2V5KSA9PiB7XHJcbiAgICAgIHRoaXMuX2luc3RhbmNlc1trZXldLmRlc3Ryb3koKTtcclxuICAgICAgdGhpcy5faW5zdGFuY2VzW2tleV0gPSBudWxsO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiJdfQ==