!function(global,factory){"object"==typeof exports&&"undefined"!=typeof module?factory(exports,require("@angular/core"),require("@angular/common"),require("rxjs/ReplaySubject")):"function"==typeof define&&define.amd?define(["exports","@angular/core","@angular/common","rxjs/ReplaySubject"],factory):factory((global.ng=global.ng||{},global.ng.ng2YoutubePlayer=global.ng.ng2YoutubePlayer||{}),global.ng.core,global.ng.common,global.rxjs_ReplaySubject)}(this,function(exports,_angular_core,_angular_common,rxjs_ReplaySubject){"use strict";var YoutubePlayerService=function(){function YoutubePlayerService(zone){this.zone=zone,this.isFullscreen=!1,this.defaultSizes={height:270,width:367},this.createApi()}return Object.defineProperty(YoutubePlayerService,"win",{get:function(){return window},enumerable:!0,configurable:!0}),Object.defineProperty(YoutubePlayerService,"YT",{get:function(){return YoutubePlayerService.win.YT},enumerable:!0,configurable:!0}),Object.defineProperty(YoutubePlayerService,"Player",{get:function(){return YoutubePlayerService.YT.Player},enumerable:!0,configurable:!0}),YoutubePlayerService.prototype.loadPlayerApi=function(options){var doc=YoutubePlayerService.win.document,playerApiScript=doc.createElement("script");playerApiScript.type="text/javascript",playerApiScript.src=options.protocol+"://www.youtube.com/iframe_api",doc.body.appendChild(playerApiScript)},YoutubePlayerService.prototype.setupPlayer=function(elementId,outputs,sizes,videoId,playerVars){var _this=this;void 0===videoId&&(videoId="");var createPlayer=function(){YoutubePlayerService.Player&&_this.createPlayer(elementId,outputs,sizes,videoId,playerVars)};this.api.subscribe(createPlayer)},YoutubePlayerService.prototype.play=function(player){player.playVideo()},YoutubePlayerService.prototype.pause=function(player){player.pauseVideo()},YoutubePlayerService.prototype.playVideo=function(media,player){var id=media.id.videoId?media.id.videoId:media.id;player.loadVideoById(id),this.play(player)},YoutubePlayerService.prototype.isPlaying=function(player){var isPlayerReady=player&&player.getPlayerState,playerState=isPlayerReady?player.getPlayerState():{};return!!isPlayerReady&&(playerState!==YT.PlayerState.ENDED&&playerState!==YT.PlayerState.PAUSED)},YoutubePlayerService.prototype.createPlayer=function(elementId,outputs,sizes,videoId,playerVars){var _this=this;void 0===videoId&&(videoId=""),void 0===playerVars&&(playerVars={});var playerSize={height:sizes.height||this.defaultSizes.height,width:sizes.width||this.defaultSizes.width};return new YoutubePlayerService.Player(elementId,Object.assign({},playerSize,{events:{onReady:function(ev){_this.zone.run(function(){return outputs.ready&&outputs.ready.next(ev.target)})},onStateChange:function(ev){_this.zone.run(function(){return outputs.change&&outputs.change.next(ev)})}},videoId:videoId,playerVars:playerVars}))},YoutubePlayerService.prototype.toggleFullScreen=function(player,isFullScreen){var _a=this.defaultSizes,height=_a.height,width=_a.width;isFullScreen||(height=window.innerHeight,width=window.innerWidth),player.setSize(width,height)},YoutubePlayerService.prototype.generateUniqueId=function(){return Math.random().toString(35).substr(2,7)},YoutubePlayerService.prototype.createApi=function(){var _this=this;this.api=new rxjs_ReplaySubject.ReplaySubject(1);var onYouTubeIframeAPIReady=function(){YoutubePlayerService.win&&_this.api.next(YoutubePlayerService.YT)};YoutubePlayerService.win.onYouTubeIframeAPIReady=onYouTubeIframeAPIReady},YoutubePlayerService}();YoutubePlayerService.decorators=[{type:_angular_core.Injectable}],YoutubePlayerService.ctorParameters=function(){return[{type:_angular_core.NgZone}]};var YoutubePlayerComponent=function(){function YoutubePlayerComponent(playerService,elementRef){this.playerService=playerService,this.elementRef=elementRef,this.videoId="",this.protocol=this.getProtocol(),this.playerVars={},this.ready=new _angular_core.EventEmitter,this.change=new _angular_core.EventEmitter}return YoutubePlayerComponent.prototype.ngAfterContentInit=function(){var htmlId=this.playerService.generateUniqueId(),playerSize={height:this.height,width:this.width};this.ytPlayerContainer.nativeElement.setAttribute("id",htmlId),this.playerService.loadPlayerApi({protocol:this.protocol}),this.playerService.setupPlayer(htmlId,{change:this.change,ready:this.ready},playerSize,this.videoId,this.playerVars)},YoutubePlayerComponent.prototype.getProtocol=function(){return window&&window.location?window.location.protocol.replace(":",""):"http"},YoutubePlayerComponent}();YoutubePlayerComponent.decorators=[{type:_angular_core.Component,args:[{changeDetection:_angular_core.ChangeDetectionStrategy.OnPush,selector:"youtube-player",template:'\n    <div id="yt-player-ng2-component" #ytPlayerContainer></div>\n  '}]}],YoutubePlayerComponent.ctorParameters=function(){return[{type:YoutubePlayerService},{type:_angular_core.ElementRef}]},YoutubePlayerComponent.propDecorators={videoId:[{type:_angular_core.Input}],height:[{type:_angular_core.Input}],width:[{type:_angular_core.Input}],protocol:[{type:_angular_core.Input}],playerVars:[{type:_angular_core.Input}],ready:[{type:_angular_core.Output}],change:[{type:_angular_core.Output}],ytPlayerContainer:[{type:_angular_core.ViewChild,args:["ytPlayerContainer"]}]};var YoutubePlayerModule=function(){function YoutubePlayerModule(){}return YoutubePlayerModule}();YoutubePlayerModule.decorators=[{type:_angular_core.NgModule,args:[{declarations:[YoutubePlayerComponent],exports:[YoutubePlayerComponent],imports:[_angular_common.CommonModule],providers:[YoutubePlayerService]}]}],YoutubePlayerModule.ctorParameters=function(){return[]},exports.YoutubePlayerModule=YoutubePlayerModule,exports.ɵa=YoutubePlayerComponent,exports.ɵb=YoutubePlayerService,Object.defineProperty(exports,"__esModule",{value:!0})});
//# sourceMappingURL=ng2-youtube-player.umd.min.js.map
